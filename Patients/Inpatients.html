<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <header class="header ">
    <h1 class="header-logo">HMS</h1>
  </header>

  <sidebar class="sidebar"></sidebar>

  <div class="patient-first-sec title margin-left margin-right margin-top"></div>

  <div class="patient-list margin-left margin-right">
    <table class="patient-table"></table> 
  </div>

  <div class="add-inpatient-overlay"></div>

  <div class="edit-inpatient-overlay">
    <div class="edit-patient-first-dropdown">
      <p class="edit-title">EDIT INPATIENT</p>
      <P>Enter Patient ID:</P>
      <input type="text" class="edit_inpatientId">
      <div class="btn-ctn">
        <button class="edit-inpatient-first-btn edit-patient-first-btn">Enter</button>
      </div>
      <p class="invalid-id"></p>
    </div>
  </div>
  
  <div class="edit-inpatient-overlay-1">
    <div class="edit-patient-second-dropdown">
      <p class="edit-title">EDIT PATIENT</p>
      <div class="patient-detail-ctn">
        <div class="patient-detail" >
          <div>
            <p >Full Name:</p>
            <input type="text" class="edit-inpatient-name">
          </div>
          <div>
            <p >Age:</p>
            <input type="text" class="edit-inpatient-age">
          </div>
          <div>
            <p >Contact No.:</p>
            <input type="text" class="edit-inpatient-phone">
          </div>
          
          <div>
            <p>Date of Admission:</p>
            <input type="date" class="edit-DOA">
          </div>
          </div>
          <div class="patient-detail">
          <div>
            <p >Gender:</p>
            <select  name="patient-sex" id="" class="edit-inpatient-sex">
              <option value="">Select</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
          </div>
          <div>
            <p >Disease:</p>
            <input type="text" class="edit-inpatient-disease">
          </div>
          <div>
            <p >Doctor ID:</p>
            <input type="text" class="edit-inpatient-doc">
          </div>
          <div>
            <p >Date of Discharge:</p>
            <input type="date" class="edit-DOD">
          </div>
          
          </div>
        </div>  
        <div class="btn-ctn">
          <button class="edit-patient-btn edit-inpatient-btn">Save</button>
        </div>
    </div>
  </div>
  
  <script src="../assets/PatientsData.js"></script>
  <script src="patient.js"></script>
  <script src="../script.js"></script>

</body>
<script>
  
  let patient_sec = 'INPATIENT';
  let overlay = 'add-inpatient-overlay';

  let c = displayInpatientList(Inpatient);
  displayPatientFirstSection(patient_sec);
  addInpatient(c,Inpatient,'add-inpatient-overlay','INP');

  document.querySelector('.add-patient').addEventListener('click',()=>{
    toggleAddPatientOverlay('add-inpatient-overlay');
  })

  document.querySelector('.edit-patient').addEventListener('click',()=>{
    toggleEditPatientOverlay('edit-inpatient-overlay');
  })


  let Patient_Id = 0;
document.querySelector('.edit-inpatient-first-btn').addEventListener('click',()=>{
  let count = 0;
  Patient_Id = document.querySelector('.edit_inpatientId').value;
  Inpatient.forEach(data=>{
    if(data.PatientId == Patient_Id){
      count++;
      document.querySelector('.edit-inpatient-name').value = data.Name;
      document.querySelector('.edit-inpatient-age').value = data.Age;
      document.querySelector('.edit-inpatient-phone').value = data.Phone;
      document.querySelector('.edit-DOA').value = data.DOAdmin;
      document.querySelector('.edit-inpatient-doc').value = data.DoctorId;
      document.querySelector('.edit-inpatient-disease').value = data.Disease;
      document.querySelector('.edit-DOD').value = data.DODischarge;
    }
  });
  if(count == 1){
    document.querySelector('.invalid-id').innerHTML = "";
    toggleEditPatientOverlay('edit-inpatient-overlay-1');

  }
  else{
    document.querySelector('.invalid-id').innerHTML = "Invalid Patient ID";
  }
});


document.querySelector('.edit-inpatient-btn').addEventListener('click',()=>{
  let Name = document.querySelector('.edit-inpatient-name').value;
  let Age = document.querySelector('.edit-inpatient-age').value;
  let Phone = document.querySelector('.edit-inpatient-phone').value;
  let DOAdmin = document.querySelector('.edit-DOA').value ;
  let DoctorId = document.querySelector('.edit-inpatient-doc').value;
  let Disease = document.querySelector('.edit-inpatient-disease').value;
  let DODischarge = document.querySelector('.edit-DOD').value;
  let sexIndex = document.querySelector('.edit-inpatient-sex').selectedIndex;
  let Sex = document.querySelector('.edit-inpatient-sex')[sexIndex].value;

  Inpatient.forEach(data=>{
    if(data.PatientId == Patient_Id){
      data.Name = Name;
      data.Age = Age;
      data.Phone = Phone;
      data.Disease = Disease;
      data.DoctorId = DoctorId;
      data.DOAdmin = DOAdmin;
      data.DODischarge = DODischarge;
      displayInpatientList(Inpatient);
      toggleEditPatientOverlay('edit-inpatient-overlay-1');
      toggleEditPatientOverlay('edit-inpatient-overlay');
    }
  });

});
</script>

</html>